async function L(t){return new Promise((n,s)=>{let o=new FileReader;o.onload=()=>n(o.result),o.onerror=()=>s(new Error("Failed to convert file to data URL")),o.readAsDataURL(t)})}function _(t,{width:n,height:s,crop:o="fill",gravity:i,quality:u="auto",format:l="auto"}={}){if(!t||typeof t!="string"||!t.includes("/upload/"))return t;try{let r=new URL(t),[d,a]=r.pathname.split("/upload/");if(!a)return t;let c=a.split("/"),f=c[0],h=c.slice(1),e=[];if(l&&e.push(`f_${l}`),u&&e.push(`q_${u}`),o&&(e.push(`c_${o}`),!i&&o==="fill"&&e.push("g_auto")),i&&e.push(`g_${i}`),n&&e.push(`w_${Math.round(n)}`),s&&e.push(`h_${Math.round(s)}`),e.length===0)return t;let b=e.map(p=>p.split("_")[0]);if(f.startsWith("v"))r.pathname=`${d}/upload/${e.join(",")}/${a}`;else{let x=[...f.split(",").filter($=>{let w=$.split("_")[0];return!b.includes(w)}),...e];r.pathname=`${d}/upload/${x.join(",")}/${h.join("/")}`}return r.toString()}catch(r){return console.warn("Failed to build optimized Cloudinary URL",r),t}}export{L as a,_ as b};
